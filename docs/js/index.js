!function(){angular.module("app",["ui.router","LocalStorageModule"]).constant("MercuryAPIPath","https://mercury.postlight.com/parser?url=")}(),function(){function t(t,e){e.otherwise("main/list"),t.state("main",{url:"/main",templateUrl:"view/view-main.html",controller:"mainCtrl as main"}).state("recommend",{url:"/recommend",templateUrl:"view/view-recommend.html"}).state("main.mylist",{url:"/list",templateUrl:"view/view-list.html",controller:"listCtrl as list",resolve:{currentlist:function(t){return t.getCurrentList()}}}).state("main.favorite",{url:"/favorite",templateUrl:"view/view-favorite.html",controller:"favoriteCtrl as favorite",resolve:{currentfavorite:function(t){return t.getCurrentFavorite()}}}).state("main.archive",{url:"/archive",templateUrl:"view/view-archive.html",controller:"archiveCtrl as archive",resolve:{currentarchive:function(t){return t.getCurrentArchive()}}})}angular.module("app").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){function t(){return{templateUrl:"view/component-template/component-actionlist.html",scope:{show:"<",currentArticle:"<",view:"@",index:"@"},controller:"actionListController",controllerAs:"actionlist",bindToController:!0}}function e(t,e){var o=this;o.$onInit=function(){o.archive=function(){t.archive(o.index,o.view,o.currentArticle),e.$emit("archive",{})},o.addBacktoList=function(){t.backToList(o.index,o.view,o.currentArticle),e.$emit("backtolist",{})},o.toggleFavorite=function(){console.log(o.index),t.toggleFavorite(o.index,o.view,o.currentArticle),e.$emit("togglefavorite",{})}}}e.$inject=["localStorageHandling","$scope"],angular.module("app").directive("actionList",t).controller("actionListController",e)}(),function(){function t(){return{templateUrl:"view/component-template/component-articleitem.html",scope:{myArticle:"=",view:"@",index:"@"},controller:"articleItemController",controllerAs:"articleitem",bindToController:!0}}function e(){var t=this;t.showactionlist=!1,t.$onInit=function(){console.log("debugging..."),t.showActionList=function(){t.showactionlist=!0},t.hideActionList=function(){t.showactionlist=!1}}}angular.module("app").directive("articleItem",t).controller("articleItemController",e)}(),function(){function t(){return{templateUrl:"view/component-template/component-mydialog.html",scope:{show:"="},controller:"myDialogController",controllerAs:"dialog",bindToController:!0,transclude:!0,link:function(t,e,o){t.dialog.dialogStyle={},o.boxWidth&&(t.dialog.dialogStyle.width=o.boxWidth),o.boxHeight&&(t.dialog.dialogStyle.height=o.boxHeight),t.dialog.hideModal=function(){t.dialog.show=!1}}}}function e(){}angular.module("app").directive("myDialog",t).controller("myDialogController",e)}(),function(){angular.module("app").component("appHeader",{templateUrl:"view/component-template/component-header.html",bindings:{toggleUrldialog:"&"}})}(),function(){function t(){return{templateUrl:"view/component-template/component-headeroflistview.html",controller:"headerListviewController",controllerAs:"headeroflist",bindToController:!0,scope:{listTitle:"@"}}}function e(){}angular.module("app").directive("headerListview",t).controller("headerListviewController",e)}(),function(){angular.module("app").component("leftSidebar",{templateUrl:"view/component-template/component-leftsidebar.html"})}(),function(){function t(t){var o=this;o.removeFromLocalStorage=function(e,o){t.get(e)||t.set(e,[]);var r=t.get(e),i=r.splice(o,1);return t.set(e,r),i},o.addToLocalStorage=function(e,o){t.get(e)||t.set(e,[]);var r=t.get(e);r.push(o),t.set(e,r)},o.addtoLocalList=function(t){o.addToLocalStorage("locallist",t)},o.getCurrentList=function(){return t.get("locallist")},o.archive=function(r,i,n){if("favorites"===i){o.changeObjArchiveStatusInList("localfavorite",r);r=e(t.get("locallist"),n.url)}else if("mylist"===i){var l=e(t.get("localfavorite"),n.url);l>=0&&o.changeObjArchiveStatusInList("localfavorite",l)}var a=o.removeFromLocalStorage("locallist",r);o.addToLocalStorage("localarchive",o.changeArchiveStatus(a[0]))},o.getCurrentArchive=function(){return t.get("localarchive")},o.changeObjArchiveStatusInList=function(e,r){var i=t.get(e);i[r]=o.changeArchiveStatus(i[r]),t.set(e,i)},o.changeArchiveStatus=function(t){return t.isArchive=!t.isArchive,t},o.backToList=function(r,i,n){if("favorites"===i){o.changeObjArchiveStatusInList("localfavorite",r);r=e(t.get("localarchive"),n.url)}else if("archive"===i){var l=e(t.get("localfavorite"),n.url);l>=0&&o.changeObjArchiveStatusInList("localfavorite",l)}var a=o.removeFromLocalStorage("localarchive",r);o.addtoLocalList(o.changeArchiveStatus(a[0]))},o.toggleFavorite=function(r,i,n){if(n.isFavorite){if("mylist"===i||"archive"===i){o.changeFavoriteStatus(r,i);var l=e(t.get("localfavorite"),n.url);l>=0&&o.removeFromLocalStorage("localfavorite",l)}else if("favorites"===i){o.removeFromLocalStorage("localfavorite",r);var a="",c=-1;n.isArchive?(a="archive",c=e(t.get("localarchive"),n.url)):(a="mylist",c=e(t.get("locallist"),n.url)),c>=0&&o.changeFavoriteStatus(c,a)}}else{var u=o.changeFavoriteStatus(r,i);o.addToLocalStorage("localfavorite",u)}},o.changeFavoriteStatus=function(e,o){var r="";"mylist"===o?r="locallist":"archive"===o&&(r="localarchive");var i=t.get(r);return i[e].isFavorite=!i[e].isFavorite,t.set(r,i),i[e]},o.getCurrentFavorite=function(){return t.get("localfavorite")}}function e(t,e){for(var o=0;o<t.length;o++)if(t[o].url===e)return o;return-1}t.$inject=["localStorageService"],angular.module("app").service("localStorageHandling",t)}(),function(){function t(t,e,o){var r=this,i=[];r.addNewArticle=function(r){var n=e+r;return t.get(n,{headers:{"x-api-key":"M1USTPmJMiRjtbjFNkNap9Z8M5XBb1aEQVXoxS5I"}}).then(function(t){var e=t.data;e.isArchive=!1,e.isFavorite=!1,i.push(e),o.addtoLocalList(e)},function(t){alert("Can't Fetch the HTML Data based on the URL.  response status: "+t.status)})},r.getArticles=function(){return i}}t.$inject=["$http","MercuryAPIPath","localStorageHandling"],angular.module("app").service("webScraper",t)}(),function(){function t(t,e,o){var r=this;r.articlelist=t,e.$on("backtolist",function(t,e){r.articlelist=o.getCurrentArchive()}),e.$on("togglefavorite",function(t,e){r.articlelist=o.getCurrentArchive()})}t.$inject=["currentarchive","$scope","localStorageHandling"],angular.module("app").controller("archiveCtrl",t)}(),function(){function t(t,e,o){var r=this;r.articlelist=t,e.$on("togglefavorite",function(t,e){r.articlelist=o.getCurrentFavorite()}),e.$on("archive",function(t,e){r.articlelist=o.getCurrentFavorite()}),e.$on("backtolist",function(t,e){r.articlelist=o.getCurrentFavorite()})}t.$inject=["currentfavorite","$scope","localStorageHandling"],angular.module("app").controller("favoriteCtrl",t)}(),function(){function t(t,e,o,r){var i=this;i.articlelist=o,t.$on("addNewURL",function(t,o){e.addNewArticle(o.url).then(function(){i.articlelist=r.getCurrentList()})}),t.$on("archive",function(t,e){i.articlelist=r.getCurrentList()}),t.$on("togglefavorite",function(t,e){i.articlelist=r.getCurrentList()})}t.$inject=["$scope","webScraper","currentlist","localStorageHandling"],angular.module("app").controller("listCtrl",t)}(),function(){function t(t){}t.$inject=["$scope"],angular.module("app").controller("mainCtrl",t)}(),function(){function t(t){var e=this;e.dialogShown=!1,e.toggleDialog=function(){e.dialogShown=!e.dialogShown},e.addNewURL=function(){e.dialogShown=!e.dialogShown,t.$broadcast("addNewURL",{url:e.newURL}),e.newURL=""}}t.$inject=["$scope"],angular.module("app").controller("topCtrl",t)}();